<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Nihilist - The Segmented Cipher</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@100;300;400;700;800&display=swap');
        
        body {
            background-color: #050505;
            color: #d1d1d1;
            font-family: 'JetBrains+Mono', monospace;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            user-select: none;
        }

        .density-container {
            text-align: center;
            width: 95%;
            max-width: 900px;
            padding: 0 10px;
        }

        .segmented-data {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 0.5rem;
            font-size: clamp(1.2rem, 5vw, 3rem);
            font-weight: 800; /* Thickened the ink */
            margin-bottom: 2rem;
            transition: all 0.2s ease;
            line-height: 2; /* Gives breathing room when wrapping on mobile */
        }

        .segment {
            position: relative;
            padding: 0 5px;
        }

        .segment::after {
            content: attr(data-label);
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.55rem;
            font-weight: 400;
            opacity: 0.4;
            letter-spacing: 0.1em;
            white-space: nowrap;
        }

        .sub-data {
            font-size: 0.75rem;
            font-weight: 700;
            opacity: 0.4;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            margin-top: 3rem;
        }

        .anchor-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(110px, 1fr)); /* Fluid yielding to the narrow space */
            gap: 15px;
            margin-top: 4rem;
            width: 100%;
            max-width: 700px;
        }

        .anchor-card {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.05);
            padding: 15px 10px;
            border-radius: 4px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .anchor-card:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .anchor-label {
            font-size: 0.55rem;
            font-weight: 400;
            color: rgba(255, 255, 255, 0.4);
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .anchor-value {
            font-size: 0.95rem;
            font-weight: 700;
            color: #fff;
            letter-spacing: 0.05em;
            word-break: break-all;
        }

        /* OVERLAY PANEL */
        .overlay-panel {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(5, 5, 5, 0.95);
            backdrop-filter: blur(25px);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s ease;
            padding: 40px 20px;
            overflow-y: auto;
        }

        .overlay-panel.visible {
            opacity: 1;
            pointer-events: auto;
        }

        .legend-grid {
            max-width: 800px;
            width: 100%;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            text-align: left;
            margin-top: 20px;
        }

        .legend-item {
            border-left: 2px solid rgba(255, 255, 255, 0.2);
            padding-left: 15px;
        }

        .legend-title {
            font-size: 0.8rem;
            font-weight: 700;
            color: #fff;
            text-transform: uppercase;
            margin-bottom: 6px;
            letter-spacing: 0.15em;
        }

        .legend-desc {
            font-size: 0.7rem;
            font-weight: 300;
            color: rgba(255, 255, 255, 0.6);
            line-height: 1.6;
        }

        .science-footer {
            margin-top: 3rem;
            font-size: 0.65rem;
            font-weight: 300;
            color: rgba(255, 255, 255, 0.4);
            max-width: 600px;
            text-align: center;
            line-height: 1.8;
            font-style: italic;
        }

        #glitch-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            background: repeating-linear-gradient(
                0deg,
                rgba(0, 0, 0, 0.05),
                rgba(0, 0, 0, 0.05) 1px,
                transparent 1px,
                transparent 2px
            );
            opacity: 0.2;
        }

        .separator {
            opacity: 0.2;
            font-weight: 300;
        }

        .info-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            font-size: 0.7rem;
            font-weight: 700;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 10px 18px;
            cursor: pointer;
            opacity: 0.7;
            transition: all 0.3s;
            z-index: 1100;
            letter-spacing: 0.1em;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .info-toggle:hover {
            opacity: 1;
            background: rgba(255, 255, 255, 0.1);
        }

        .close-hint {
            margin-top: 40px;
            font-size: 0.6rem;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.4);
            text-transform: uppercase;
            letter-spacing: 0.3em;
        }

        .pulse-sub {
            color: rgba(255, 255, 255, 0.4);
            font-size: 0.8em;
            font-weight: 300;
            margin-left: 2px;
        }
        
        @media (max-width: 600px) {
            .segmented-data {
                gap: 0.3rem;
            }
            .separator {
                display: none; /* Hide dashes on small screens so blocks stack cleaner if wrapped */
            }
            .info-toggle {
                top: 15px;
                right: 15px;
                padding: 8px 12px;
                font-size: 0.6rem;
            }
        }
    </style>
</head>
<body>

    <div id="glitch-overlay"></div>
    <div class="info-toggle" id="toggle-btn" onclick="toggleOverlay()">[ASIɾI / DEFINITIONS]</div>

    <div id="overlay" class="overlay-panel" onclick="toggleOverlay()">
        <div class="legend-grid">
            <div class="legend-item">
                <div class="legend-title">Eon</div>
                <div class="legend-desc">The deep past. Multiples of 1,555 years. The great shadow of the void.</div>
            </div>
            <div class="legend-item">
                <div class="legend-title">Era</div>
                <div class="legend-desc">The generational anchor. 25 years. 1 Era = 62 Spans.</div>
            </div>
            <div class="legend-item">
                <div class="legend-title">Span</div>
                <div class="legend-desc">The heavy season. 147.7 days (approx 5 months). 1 Span = 62 Cycles.</div>
            </div>
            <div class="legend-item">
                <div class="legend-title">Cycle</div>
                <div class="legend-desc">The long stride. Resets every 2.3 days. Use this to anchor the day of gathering. 1 Cycle = 62 Shifts.</div>
            </div>
            <div class="legend-item">
                <div class="legend-title">Shift</div>
                <div class="legend-desc">The changing watch. Intervals of 55 minutes. Align meetings within these blocks. 1 Shift = 62 Breaths.</div>
            </div>
            <div class="legend-item">
                <div class="legend-title">Breath</div>
                <div class="legend-desc">The pause between thoughts. 53 seconds of duration. For measuring the short stay. 1 Breath = 62 Pulses.</div>
            </div>
            <div class="legend-item">
                <div class="legend-title">Pulse</div>
                <div class="legend-desc">The basic unit of the void. 0.86 seconds. The heartbeat of existence, anchored to the Earth's rotation (100k/day).</div>
            </div>
        </div>
        
        <div class="science-footer">
            The Epoch is anchored 13.787 billion years ago, following the exact microscopic consensus of the Big Bang. The units are derived from powers of 62, the maximum density of the alphanumeric cipher, forged with absolute integer precision to strip away the human-centric mask of the Gregorian illusion and reveal the unceasing pulse of the dark without tearing the fabric of the math.
        </div>
        
        <div class="close-hint">TOUCH THE VOID TO RETURN</div>
    </div>

    <div class="density-container" id="main-ui">
        <div id="display" class="segmented-data">
            <!-- Segments injected by JS -->
        </div>
        
        <div class="sub-data">THE PURE BASE62 CIPHER</div>

        <div id="anchors" class="anchor-grid">
            <div class="anchor-card" onclick="copyAnchor('ana')">
                <div class="anchor-label">ana (yesterday)</div>
                <div id="ana-anchor" class="anchor-value">...</div>
            </div>
            <div class="anchor-card" onclick="copyAnchor('oni')">
                <div class="anchor-label">oni (today)</div>
                <div id="oni-anchor" class="anchor-value">...</div>
            </div>
            <div class="anchor-card" onclick="copyAnchor('ola')">
                <div class="anchor-label">ola (tomorrow)</div>
                <div id="ola-anchor" class="anchor-value">...</div>
            </div>
        </div>
    </div>

    <script>
        const B62_CHARS = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';

        class TimeLaw {
            static EPOCH_OFFSET_MS = 435071060400000000n;
            static TICKS_PER_DAY = 100000n; 
            static MS_PER_DAY = 86400000n;

            static msToTicks(ms) {
                const totalMs = BigInt(ms) + TimeLaw.EPOCH_OFFSET_MS;
                return (totalMs * TimeLaw.TICKS_PER_DAY) / TimeLaw.MS_PER_DAY;
            }

            static toBase62(ticks) {
                let n = ticks;
                if (n === 0n) return '0';
                let result = '';
                while (n > 0n) {
                    result = B62_CHARS[Number(n % 62n)] + result;
                    n /= 62n;
                }
                return result.padStart(8, '0');
            }

            static subPulse(ms) {
                const totalMs = BigInt(ms) + TimeLaw.EPOCH_OFFSET_MS;
                const remainderMs = (totalMs * TimeLaw.TICKS_PER_DAY) % TimeLaw.MS_PER_DAY;
                const index = (remainderMs * 62n) / TimeLaw.MS_PER_DAY;
                return B62_CHARS[Number(index)];
            }
        }

        let overlayVisible = false;

        function toggleOverlay() {
            overlayVisible = !overlayVisible;
            const overlay = document.getElementById('overlay');
            const toggle = document.getElementById('toggle-btn');
            overlay.classList.toggle('visible', overlayVisible);
            toggle.innerText = overlayVisible ? '[CLOSE]' : '[ASIɾI / DEFINITIONS]';
        }

        function updateAnchors() {
            const now = Date.now();
            const oneDay = 86400000;
            
            document.getElementById('ana-anchor').innerText = TimeLaw.toBase62(TimeLaw.msToTicks(now - oneDay));
            document.getElementById('oni-anchor').innerText = TimeLaw.toBase62(TimeLaw.msToTicks(now));
            document.getElementById('ola-anchor').innerText = TimeLaw.toBase62(TimeLaw.msToTicks(now + oneDay));
        }

        function copyAnchor(type) {
            const val = document.getElementById(`${type}-anchor`).innerText;
            const temp = document.createElement('input');
            document.body.appendChild(temp);
            temp.value = val;
            temp.select();
            document.execCommand('copy');
            document.body.removeChild(temp);
        }

        function renderDisplay(nowMs) {
            const ticks = TimeLaw.msToTicks(nowMs);
            const b62 = TimeLaw.toBase62(ticks);
            const sub = TimeLaw.subPulse(nowMs);
            
            const eon = b62.slice(0, -6) || '0';
            const era = b62.slice(-6, -5) || '0';
            const span = b62.slice(-5, -4) || '0';
            const cycle = b62.slice(-4, -3) || '0';
            const shift = b62.slice(-3, -2) || '0';
            const breath = b62.slice(-2, -1) || '0';
            const pulse = b62.slice(-1) || '0';

            const display = document.getElementById('display');
            display.innerHTML = `
                <div class="segment" data-label="EON">${eon}</div>
                <div class="separator">-</div>
                <div class="segment" data-label="ERA">${era}</div>
                <div class="separator">-</div>
                <div class="segment" data-label="SPAN">${span}</div>
                <div class="separator">-</div>
                <div class="segment" data-label="CYCLE">${cycle}</div>
                <div class="separator">-</div>
                <div class="segment" data-label="SHIFT">${shift}</div>
                <div class="separator">-</div>
                <div class="segment" data-label="BREATH">${breath}</div>
                <div class="separator">-</div>
                <div class="segment" data-label="PULSE">${pulse}<span class="pulse-sub">${sub}</span></div>
            `;
        }

        function tick() {
            renderDisplay(Date.now());
            requestAnimationFrame(tick);
        }

        window.onload = () => {
            updateAnchors();
            setInterval(updateAnchors, 60000);
            tick();
        };

        document.body.addEventListener('mousemove', (e) => {
            const intensity = (e.clientX / window.innerWidth);
            if (!overlayVisible) {
                document.querySelectorAll('.segment').forEach(seg => {
                    seg.style.opacity = 0.4 + (intensity * 0.6);
                });
            }
        });

    </script>
</body>
</html>
